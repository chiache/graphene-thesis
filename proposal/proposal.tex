\documentclass[12pt]{report}

% comment out the following line when submitting
%\def \debug{}
\def \prethesis{}

\usepackage{geometry}
\geometry{margin=1in}
\usepackage{titlesec}
\usepackage{titletoc}
\usepackage{tocloft}
\usepackage{setspace}
\usepackage{paralist}
\usepackage{rotating}
\usepackage{fancybox}
\usepackage{listings}
\lstset{language=C}
\usepackage{comment}
\usepackage{alltt}
\usepackage{color}
\usepackage[authoryear,square,sort]{natbib}
\usepackage[titletoc,title]{appendix}
\usepackage{lastpage}
\usepackage{times}
\usepackage{multirow}
\usepackage[hyphens]{url}
\usepackage{array}
\usepackage{graphicx}
\usepackage{upgreek}
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{float}
\usepackage[font={small}]{caption}
\usepackage{booktabs}
\usepackage[hidelinks]{hyperref}

\renewcommand*{\ttdefault}{lmtt}

\input{../macros}

\ifx \debug \undefined
\newcommand{\fixme}[1]{{}}
\newcommand{\fixmedp}[1]{{}}
\else
\newcommand{\fixme}[1]{{\bf\textcolor{blue}{ [ FIXME: #1 ]}}}
\newcommand{\fixmedp}[1]{{\bf\textcolor{red}{ [ FIXME dP: #1 ]}}}
\fi

\ifx \prethesis \undefined
\newcommand{\note}[1]{{}}
\else
\newcommand{\note}[1]{{\bf\textcolor{blue}{ [ NOTE: #1 ]}}}
\fi

%\newcommand{\thesistitle}{Balancing Practicality and Security Isolation for Applications\\ with Untrustworthy System Stacks}
%\newcommand{\thesistitle}{Legacy Code Reuse in Partitioned Systems for Isolating Security and Performance Pitfalls: from the OS perspective}
%\newcommand{\thesistitle}{Reusing Legacy Code in Partitioned or Optimized Systems for Isolating Security and Performance Pitfalls: An OS perspective}
%\newcommand{\thesistitle}{Enabling Legacy Applications in Innovative Systems for Security Isolation and Efficiency}
\newcommand{\thesistitle}{Securely and Efficiently Reusing Legacy Applications with the Graphene Library OS}
%\newcommand{\thesistitle}{Emulating and Isolating Idiosyncratic OS Abstractions on Any Host Platforms using the Graphene Library OS}
\newcommand{\thesisauthor}{Chia-Che Tsai}
\newcommand{\thesisyear}{2016}
\newcommand{\thesismonth}{August}

\newcommand{\term}[1]{{\bf #1}}

\makeatletter
\newcommand*{\declarecommand}{%
  \@star@or@long\declare@command
}
\newcommand*{\declare@command}[1]{%
  \provide@command{#1}{}%
  % \let#1\@empty % would be more efficient, but without error checking
  \renew@command{#1}%
}
\makeatother


\setlength{\parskip}{0pt}
\titlespacing{\paragraph}{0pt}{0.5\baselineskip}{1em}

\begin{document}
\pagenumbering{gobble}

\title{\bf{Title of Dissertation}}

\vspace*{6\baselineskip}
{\centering{\bf{\thesistitle{}}}\\}
\vspace*{3\baselineskip}
\centerline{A Dissertation Proposal presented}
\vspace*{1\baselineskip}
\centerline{by} 
\vspace*{1\baselineskip}
\centerline{\bf{\thesisauthor{}}}
\vspace*{1\baselineskip}
\centerline{to} 
\vspace*{1\baselineskip}
\centerline{The Graduate School}
\vspace*{1\baselineskip}
\centerline{in Partial Fulfillment of the}
\vspace*{1\baselineskip}
\centerline{Requirements}
\vspace*{1\baselineskip}
\centerline{for the Degree of}
\vspace*{1\baselineskip}
\centerline{\bf{Doctor of Philosophy}}
\vspace*{1\baselineskip}
\centerline{in}
\vspace*{1\baselineskip}
\centerline{\bf{Computer Science}}
\vspace*{1\baselineskip}
\centerline{}
%\centerline{\bf{(Concentration - optional)}}
\vspace*{2\baselineskip}
\centerline{Stony Brook University}
\vspace*{2\baselineskip}
\centerline{\bf{\thesismonth{} \thesisyear{}}}     

%\newpage
%\pagenumbering{gobble}

%\vspace*{32\baselineskip}
%\centerline{\it{(include this copyright page only if you are selecting %copyright through ProQuest, which is optional)}}
%\vspace*{1\baselineskip}
%\centerline{Copyright by}
%\centerline{\thesisauthor{}}
%\centerline{\thesisyear{}}

%\newpage
%\pagenumbering{roman}
%\setcounter{page}{2}

%\centerline{\bf{Stony Brook University}}
%\vspace*{1\baselineskip}
%\centerline{The Graduate School}
%\vspace*{2\baselineskip}
%\centerline{\thesisauthor{}}
%\vspace*{2\baselineskip}
%\centerline{We, the dissertation committee for the above candidate for the}
%\vspace*{1\baselineskip}
%\centerline{Doctor of Philosophy degree, hereby recommend}
%\vspace*{1\baselineskip}
%\centerline{acceptance of this dissertation}
%\vspace*{2\baselineskip}
%\centerline{\bf{Name - Dissertation Advisor}}
%\centerline{\bf{Include title and department}}
%\vspace*{2\baselineskip}
%\centerline{\bf{Name - Chairperson of Defense}}
%\centerline{\bf{Include title and department}}
%\vspace*{2\baselineskip}
%\centerline{\bf{Type the remaining committe members using the above format. Type each member's}}
%\centerline{\bf{name, title and department. Always make sure the signature page is kept to one page in}} 
%\centerline{\bf{length.}}
%\vspace*{1\baselineskip}
%\centerline{\bf{Type the outside member's name last. Include discipline and affiliation.}}
%\vspace*{2\baselineskip}
%\centerline{This dissertation is accepted by the Graduate School}
%\vspace*{3\baselineskip}
%\centerline{Charles Taber}
%\centerline{Dean of the Graduate School}


\declarecommand{\graphene}{Graphene}
\declarecommand{\graphenesgx}{Graphene-SGX}
\declarecommand{\civet}{Civet}
\declarecommand{\intel}{Intel}
\declarecommand{\sgx}{SGX}
\declarecommand{\microkernel}{microkernel}
\declarecommand{\libos}{library OS}
\declarecommand{\liboses}{library OSes}
\declarecommand{\picoproc}{picoprocess}
\declarecommand{\picoprocs}{picoprocesses}
\declarecommand{\haven}{Haven}
\declarecommand{\drawbridge}{Drawbridge}
\declarecommand{\java}{Java}
\declarecommand{\microbench}{micro-benchmark}
\declarecommand{\sysvipc}{System V IPC}
\declarecommand{\us}{$\mu$S}
\declarecommand{\x}{$\times$}


\newpage
\pagenumbering{arabic}
\setcounter{page}{2}

\phantomsection
\addcontentsline{toc}{chapter}{Abstract}
\centerline{Abstract of the Dissertation Proposal}
\vspace*{3\baselineskip}
{\centering{\bf{\thesistitle{}}}\\}
\vspace*{1\baselineskip}
\centerline{by}
\vspace*{1\baselineskip}
\centerline{\bf{\thesisauthor{}}}
\vspace*{2\baselineskip}
\centerline{For the Degree of}
\vspace*{1\baselineskip}
\centerline{\bf{Doctor of Philosophy}}
\vspace*{1\baselineskip}
\centerline{in}
\vspace*{1\baselineskip}
\centerline{\bf{Computer Science}}
\vspace*{1\baselineskip}
\centerline{}
%\centerline{\bf{(Concentration - optional)}}
\vspace*{1\baselineskip}
\centerline{Stony Brook University}
\vspace*{1\baselineskip}
\centerline{\bf{\thesisyear{}}}
\vspace*{2\baselineskip}
\input{abstract}

%\newpage
%\centerline{\bf{Dedication Page}}
%\vspace*{4\baselineskip}
%This page is optional.

%\newpage
%\centerline{\bf{Frontispiece}}
%\vspace*{4\baselineskip}
%The frontispiece is generally an illustration, and is an optional page.

\newlength{\charwidth}
\setlength{\charwidth}{\widthof{\S}}

\newpage
%\centerline{\bf{Table of Contents}}
\renewcommand{\contentsname}{\centerline{\normalsize\bf{Table of Contents}}}
\renewcommand{\cftchapfont}{\normalsize\bf\def\\{}\def\em{}}
\renewcommand{\cftsecfont}{\normalsize\def\\{}\def\em{}}
\renewcommand{\cftsubsecfont}{\normalsize\def\\{}\def\em{}}
\pdfbookmark[0]{Table of Contents}{Contents}
\tableofcontents

\titleformat{\section}{\normalfont\fontsize{14}{16}\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\fontsize{12}{15}\bfseries}{\thesubsection}{0.5em}{}

\newpage
\centerline{\bf{List of Figures / Tables}}
\pdfbookmark{Table of Figures / Tables}{Figures / Tables}
%\vspace*{4\baselineskip}
\begingroup
\let\clearpage\relax
\renewcommand{\listfigurename}{\centerline{\normalsize\bf{Figures}}}
\listoffigures
\renewcommand{\listtablename}{\centerline{\normalsize\bf{Tables}}}
\listoftables
\endgroup

%\newpage
%\centerline{\bf{List of Abbreviations}}
%\vspace*{4\baselineskip}
%Include this list if applicable.

%\newpage
%\centerline{\bf{Preface}}
%\vspace*{4\baselineskip}
%This page is optional.

%\newpage
%\phantomsection
%\addcontentsline{toc}{chapter}{Acknowledgements}
%\centerline{\bf{Acknowledgments}}
%\vspace*{4\baselineskip}
%\input{acknowledge}

%\newpage
%\centerline{\bf{Vita, Publications and/or Fields of Study}}
%\vspace*{4\baselineskip}
%This page is optional for doctoral students only.

\titleformat{\chapter}[display]
{\normalfont\centering\bf}{\chaptertitlename{} \thechapter{}}{1pc}{\Large\bf}

\def \longconferencenames{}
\input{../conferences}

\input{intro}
\input{graphene/graphene}
\input{civet/civet}
\input{syspop/syspop}
%\input{dcache/paper}
\input{future/proposal}
%\input{future/future}
\input{related}
\input{conclusion}

\newpage
\phantomsection
\addcontentsline{toc}{chapter}{References}
\renewcommand{\bibname}{\centerline{\normalsize\bf{References}}}
\bibliographystyle{plainnat}
\bibliography{../bibliography}

\newpage
\begin{appendices}
\input{syspop/defs}
\end{appendices}

\end{document}
