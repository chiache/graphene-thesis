Intel \sgx{}~\cite{intelsgx} shows a compelling example that an unmodified application fails to run inside a beneficial, new host environment.
\sgx{} is a hardware support
for facilitating an application to defend against untrusted OSes, hypervisors, and infrastructures.
Although \sgx{} presents particular challenges for running an unmodified application, such as protecting the application
from malicious host system calls,
the \graphene{} architecture significantly reduces the complexity
of resolving both compatibility and security restrictions of the \sgx{} platform.


This chapter summarizes the development of a \sgx{} framework using \graphene{}, for protecting unmodified Linux applications.
This chapter starts with an overview of \sgx{}-specific challenges
for porting an application,
followed by a comparison of approaches to shielding an application from an untrusted host~\cite{osdi16scone,shinde17panoply,baumann14haven}.
This chapter then describes the design of \graphenesgx{},
a \sgx{} port of \graphene{},
which fits an unmodified application into the paradigm of \sgx{}-ready applications,
and customizes an interface to an untrusted OS
for simplifying the security checks against malicious host system calls.
This chapter shows
that by checking a narrowed host interface,
\graphenesgx{} shields Linux system calls inside a \thelibos{} instance.
