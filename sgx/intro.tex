Intel SGX~\cite{intelsgx} shows a compelling example that an unmodified application fails to run inside a beneficial, new host environment.
SGX provides hardware guarantees
for facilitating an application to defend against untrusted OSes, hypervisors, and infrastructures.
Although SGX presents particular challenges for running an unmodified application, such as protecting the application
from malicious host \linuxapis{},
the \graphene{} architecture significantly reduces the complexity
of resolving both compatibility and security restrictions of the SGX platform.


This chapter starts with an overview of the SGX-specific challenges
for running an unmodified application,
followed by a comparison of existing approaches to shielding the application from an untrusted host~\cite{osdi16scone,shinde17panoply,baumann14haven}.
This chapter then describes the design of \graphenesgx{},
a SGX port of \graphene{},
which fits an unmodified application into the paradigm of SGX-ready applications,
and customizes an interface to an untrusted OS
for simplifying the security checks against malicious host \linuxapis{}.
This chapter shows
that by checking a narrowed host interface,
\graphene{} thoroughly protects the supported Linux abstractions inside an \thelibos{} instance.
